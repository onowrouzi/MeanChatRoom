<div class="container-fluid" id="chatBody">
	
	<button class="btn btn-primary visible-xs pull-left" ng-click="isCollapsed = !isCollapsed">Online Users</button>
	
	<h1 class="text-center" id="chatHeader">MEANchat</h1>

	<div class="row">
		<div class="col-sm-4" uib-collapse="isCollapsed">
			<div>
				<h3>Online Users</h3>
				<div class="list-group" id="online">
					<div ng-repeat="u in users track by $index">
						<div ng-if="u.username != chat.username" id="onlineUser">
							{{u.username}}
							<button ng-hide="u.request || u.username == chat.receiver " class="roomJoin btn btn-success" ng-click="setPrivate(u)">PRIVATE CHAT</button>
							<button ng-show="chat.receiver==u.username && chat.isPrivate" class="roomJoin btn btn-danger" ng-click="setPublic()">LEAVE PRIVATE</button>
							<button ng-show="u.request && u.username != chat.receiver" class="roomJoin btn btn-primary" ng-click="setPrivate(u)">NEW MESSAGE</button>
						</div>
					</div>
				</div>
			</div>
			<form class="hidden-xs action="/users/logout" method="get">
				<button class="uiButton btn" ng-click="logout()">Logout</button>
			</form>
		</div>
		<div class="col-sm-8 col-xs-12">
				<h3 class="text-right">Recipients: {{recipients}}</h3>
			<div id="chat" scroll-glue>
				<div ng-repeat="m in messages | orderBy:'time' track by $index">
					<div class="row messageRow">
						<div class="col-xs-2" ng-hide="m.username==chat.username">
							<img class="userIcon img-responsive img-circle" 
								ng-src="{{m.avatar}}">
							<br> <h5 class="text-center sender"><strong>{{m.username}}</strong></h5> 
						</div>
						<div class="col-xs-10">
							<div class="message" ng-class="{curUser: m.username==chat.username}">
								[{{m.time}} GMT]: <br><br>{{m.message}}
							</div>
						</div>
					</div>
				</div>
			</div>
			<br>
			
			<form id="messageForm" ng-submit="send(message)">
				<div class="form-group">
					<label>Enter Message</label>
					<textarea class="form-control" ng-model="chat.message" ng-keyup="getEnter($event)" id="messageInput"></textarea>
					<br>
					<input type="submit" id="lightBtn" class="uiButton btn" value="Send Message"/>
				</div>
			</form>
			<form class="visible-xs" action="/users/logout" method="get">
				<br>
				<button class="uiButton btn" ng-click="logout()">Logout</button>
			</form>
		</div>
	</div>
	
</div>